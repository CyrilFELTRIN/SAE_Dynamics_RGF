@page
@model IndexModel
@{
    ViewData["Title"] = "Accueil";
}

<!-- Section Hero -->
<section class="hero-section py-5 py-lg-7">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-5 mb-lg-0">
                <span class="badge bg-primary bg-opacity-10 text-primary px-3 py-2 rounded-pill mb-3 d-inline-block"
                      data-lang-fr="Montres d'exception"
                      data-lang-en="Exceptional timepieces">
                    Montres d'exception
                </span>
                <h1 class="display-4 fw-bold mb-4" 
                    data-lang-fr="ROLIX — L'art du temps, au poignet" 
                    data-lang-en="ROLIX — The art of time, on your wrist">
                    ROLIX — L'art du temps, au poignet
                </h1>
                <p class="lead mb-4 text-muted" 
                   data-lang-fr="Découvrez notre collection de montres haut de gamme : design intemporel, matériaux nobles et précision remarquable. Chaque modèle est sélectionné pour sublimer votre style." 
                   data-lang-en="Explore our premium watch collection: timeless design, fine materials and remarkable precision. Each model is selected to elevate your style.">
                    Découvrez notre collection de montres haut de gamme : design intemporel, matériaux nobles et précision remarquable.
                </p>
                <div class="d-flex flex-column flex-sm-row gap-3">
                    <a href="/Products" class="btn btn-primary btn-lg px-4 py-3 fw-medium" 
                       data-lang-fr="Découvrir la collection" 
                       data-lang-en="Explore the collection">
                        <i class="fas fa-gem me-2"></i>Découvrir la collection
                    </a>
                    <a href="#features" class="btn btn-outline-primary btn-lg px-4 py-3 fw-medium" 
                       data-lang-fr="Nos engagements" 
                       data-lang-en="Our commitments">
                        <i class="fas fa-arrow-down me-2"></i>Nos engagements
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="position-relative">
                    <div class="position-relative z-2 rounded-4 overflow-hidden shadow-lg">
                        @if (Model.FeaturedProducts != null && Model.FeaturedProducts.Any())
                        {
                            <div id="featuredProductsCarousel" class="carousel slide rolix-carousel" data-bs-ride="carousel" data-bs-interval="4500">
                                <div class="carousel-indicators">
                                    @for (var i = 0; i < Model.FeaturedProducts.Count; i++)
                                    {
                                        <button type="button" data-bs-target="#featuredProductsCarousel" data-bs-slide-to="@i" class="@(i == 0 ? "active" : "")" aria-current="@(i == 0 ? "true" : "false")" aria-label="Slide @(i + 1)"></button>
                                    }
                                </div>

                                <div class="carousel-inner">
                                    @for (var i = 0; i < Model.FeaturedProducts.Count; i++)
                                    {
                                        var p = Model.FeaturedProducts[i];
                                        <div class="carousel-item @(i == 0 ? "active" : "")">
                                            <a class="text-decoration-none" asp-page="/ProductDetail" asp-route-ProductNumber="@p.ProductNumber">
                                                <div class="rolix-carousel-frame">
                                                    <img src="@p.ImageUrl"
                                                         alt="@p.Name"
                                                         class="d-block w-100 rolix-carousel-img"
                                                         loading="lazy">
                                                    <div class="rolix-carousel-overlay"></div>
                                                </div>
                                            </a>
                                            <div class="rolix-carousel-caption">
                                                <div class="badge bg-primary bg-opacity-75 mb-2" data-lang-fr="Mise à la une" data-lang-en="Featured">Mise à la une</div>
                                                <div class="h4 fw-semibold mb-1">@p.Name</div>
                                                <div class="small text-white-50">@p.Category</div>
                                            </div>
                                        </div>
                                    }
                                </div>

                                <button class="carousel-control-prev rolix-carousel-control" type="button" data-bs-target="#featuredProductsCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden" data-lang-fr="Précédent" data-lang-en="Previous">Précédent</span>
                                </button>
                                <button class="carousel-control-next rolix-carousel-control" type="button" data-bs-target="#featuredProductsCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden" data-lang-fr="Suivant" data-lang-en="Next">Suivant</span>
                                </button>
                            </div>
                        }
                        else
                        {
                            <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" 
                                 alt="Montre de luxe ROLIX" 
                                 class="img-fluid rounded-4"
                                 data-lang-fr="Visuel d'une montre de luxe ROLIX"
                                 data-lang-en="ROLIX luxury watch visual">
                        }
                    </div>
                    <div class="position-absolute top-0 start-0 w-100 h-100 bg-primary bg-opacity-10 rounded-4" style="transform: rotate(-5deg);"></div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-4 py-lg-5">
    <div class="container">
        <div class="d-flex align-items-center justify-content-between gap-3 mb-3">
            <div>
                <div class="text-uppercase small text-muted" data-lang-fr="Nouveautés" data-lang-en="New arrivals">Nouveautés</div>
                <h2 class="h3 fw-bold mb-0" data-lang-fr="À découvrir" data-lang-en="Discover">À découvrir</h2>
            </div>
            <a href="/Products" class="btn btn-outline-primary" data-lang-fr="Voir tout" data-lang-en="View all">Voir tout</a>
        </div>

        @if (Model.NewProducts != null && Model.NewProducts.Any())
        {
            <div class="new-products-showcase">
                <div id="newProductsCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5500">
                    <div class="carousel-inner">
                        @for (var i = 0; i < Model.NewProducts.Count; i++)
                        {
                            var p = Model.NewProducts[i];
                            <div class="carousel-item @(i == 0 ? "active" : "")">
                                <a class="text-decoration-none" asp-page="/ProductDetail" asp-route-ProductNumber="@p.ProductNumber">
                                    <div class="new-products-slide">
                                        <div class="new-products-media">
                                            <img src="@p.ImageUrl" alt="@p.Name" loading="lazy" />
                                            <div class="new-products-media-overlay"></div>
                                        </div>
                                        <div class="new-products-body">
                                            <div class="new-products-badges">
                                                <span class="badge" data-lang-fr="Nouveauté" data-lang-en="New">Nouveauté</span>
                                            </div>
                                            <div class="new-products-title">@p.Name</div>
                                            <div class="new-products-subtitle">@p.Category</div>
                                            <div class="new-products-price product-price" data-price-eur="@(p.PriceEur?.ToString("F2", System.Globalization.CultureInfo.InvariantCulture) ?? "")" data-price-chf="@(p.PriceChf?.ToString("F2", System.Globalization.CultureInfo.InvariantCulture) ?? "")" style="display:none;"></div>
                                            <div class="new-products-cta" data-lang-fr="Voir le détail →" data-lang-en="View details →">Voir le détail →</div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        }
                    </div>

                    @if (Model.NewProducts.Count > 1)
                    {
                        <button class="carousel-control-prev new-products-control" type="button" data-bs-target="#newProductsCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden" data-lang-fr="Précédent" data-lang-en="Previous">Précédent</span>
                        </button>
                        <button class="carousel-control-next new-products-control" type="button" data-bs-target="#newProductsCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden" data-lang-fr="Suivant" data-lang-en="Next">Suivant</span>
                        </button>
                    }

                    <div class="carousel-indicators new-products-indicators">
                        @for (var i = 0; i < Model.NewProducts.Count; i++)
                        {
                            var p = Model.NewProducts[i];
                            <button type="button"
                                    data-bs-target="#newProductsCarousel"
                                    data-bs-slide-to="@i"
                                    class="@(i == 0 ? "active" : "")"
                                    aria-current="@(i == 0 ? "true" : "false")"
                                    aria-label="Slide @(i + 1)"
                                    style="background-image: url('@p.ImageUrl');">
                            </button>
                        }
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="text-muted" data-lang-fr="Aucune nouveauté pour le moment." data-lang-en="No new products for now.">Aucune nouveauté pour le moment.</div>
        }
    </div>
</section>
